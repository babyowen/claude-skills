---
name: deepthink
description: 深度思考辅助工具，采用多agent协作模式帮助用户澄清目标、收集背景、设计方案、批判审视，最终输出结构化思考报告。使用场景：用户需要进行深度思考、问题分析、方案设计、决策支持时。触发词包括 /deepthink、深度思考、帮我思考、深入分析等。
user-invocable: true
---

# DeepThink - 深度思考辅助工具

## 概述

DeepThink 是一个结构化的深度思考辅助工具，通过多Agent协作帮助用户：

1. **澄清核心目标** - 消除歧义，准确定位问题本质
2. **收集背景信息** - 从多来源整合相关资料
3. **设计解决方案** - 形成可执行的方案
4. **批判性审视** - 识别风险和盲点
5. **输出最终报告** - 整合所有思考成果

## 工作流程

### 初始化

当用户触发此skill时，首先：

1. 欢迎用户并简要说明流程
2. 询问用户想要深入思考的问题或想法
3. 初始化思考状态

```
状态变量:
- current_phase: "init"
- clarified_goal: null
- collected_context: null
- proposed_solution: null
- identified_risks: null
- user_options_history: []
```

---

### Phase 1: 目标澄清

**目标**: 通过对话式交互，消除歧义，提炼核心目标

**执行步骤**:

1. 加载 `@agents/goal-clarifier.md` 作为目标澄清Agent
2. 以友好、探索性的方式与用户对话
3. 通过提问帮助用户：
   - 明确问题的真实意图
   - 识别隐藏的假设
   - 区分"想要"和"需要"
   - 确定成功的衡量标准
4. 输出清晰、无歧义的目标陈述
5. 询问用户确认目标是否准确

**输出格式**:
```markdown
## 🎯 澄清后的核心目标

[清晰、具体、可衡量的目标陈述]

### 成功标准
- [标准1]
- [标准2]

### 关键约束
- [约束1]
- [约束2]
```

**用户选项**:
| 选项 | 说明 |
|------|------|
| **继续** | 目标已清晰，进入下一环节 |
| **补充** | 需要进一步澄清某些方面 |
| **重新定义** | 目标方向需要调整 |

---

### Phase 2: 背景收集

**目标**: 多渠道收集与问题相关的背景信息

**执行步骤**:

1. 加载 `@agents/context-collector.md` 作为背景收集Agent
2. 分析目标，确定需要收集的信息类型
3. 通过多种渠道收集信息：
   - **互联网搜索**: 使用 WebSearch 工具
   - **本地文件**: 读取用户指定的文档
   - **用户输入**: 直接询问用户相关信息
   - **代码仓库**: 如涉及技术问题，分析相关代码
4. 整理信息，形成结构化背景
5. 与用户讨论是否需要补充

**输出格式**:
```markdown
## 📚 背景信息

### 关键背景
[最重要的背景摘要，3-5条]

### 详细信息
#### [类别1]
- [信息点1]
- [信息点2]

#### [类别2]
- [信息点1]
- [信息点2]

### 参考来源
- [来源1]: [链接/路径]
- [来源2]: [链接/路径]

### 信息缺口
[尚未获取但可能重要的信息]
```

**用户选项**:
| 选项 | 说明 |
|------|------|
| **继续** | 背景信息已充分，进入下一环节 |
| **跳过下一环节** | 当前信息已足够，直接进入方案设计 |
| **补充** | 需要收集更多特定信息 |
| **输出当前结果** | 提前结束，基于已有信息输出报告 |

---

### Phase 3: 方案设计

**目标**: 基于目标和背景，构思并对比多个可行方案

**执行步骤**:

1. 加载 `@agents/solution-designer.md` 作为方案设计Agent
2. 基于目标和背景，生成2-3个候选方案
3. 对每个方案进行：
   - 核心思路说明
   - 实施步骤规划
   - 资源需求评估
   - 预期效果分析
4. 对比分析各方案的优劣
5. 形成推荐方案
6. 与用户讨论方案细节

**输出格式**:
```markdown
## 💡 候选方案

### 方案 A: [方案名称]
**核心思路**: [一句话概括]

**实施步骤**:
1. [步骤1]
2. [步骤2]
...

**优势**:
- [优势1]
- [优势2]

**劣势**:
- [劣势1]
- [劣势2]

**资源需求**: [时间/人力/资金等]

---

### 方案 B: [方案名称]
[同上结构]

---

## 📊 方案对比

| 维度 | 方案A | 方案B | 方案C |
|------|-------|-------|-------|
| 可行性 | ⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ |
| 效果预期 | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ |
| 资源消耗 | 低 | 中 | 高 |
| 风险程度 | 低 | 中 | 高 |

## ⭐ 推荐方案
**方案 [X]**: [推荐理由]
```

**用户选项**:
| 选项 | 说明 |
|------|------|
| **继续** | 接受推荐方案，进入批判审视 |
| **修改方案** | 对某个方案进行调整 |
| **新增方案** | 需要考虑其他可能性 |
| **返回修正** | 回到目标澄清或背景收集阶段 |

---

### Phase 4: 批判审视

**目标**: 从反对者角度审视推荐方案，识别风险和盲点

**执行步骤**:

1. 加载 `@agents/challenger.md` 作为反对者Agent
2. 以批判性思维审视推荐方案：
   - 识别潜在风险
   - 发现盲点和假设
   - 考虑边界条件
   - 评估实施难度
3. 与用户讨论应对策略
4. 输出风险清单与应对建议

**输出格式**:
```markdown
## 🔍 批判性审视

### 识别的风险

| 风险 | 可能性 | 影响程度 | 应对策略 |
|------|--------|---------|---------|
| [风险1] | 高/中/低 | 高/中/低 | [策略] |
| [风险2] | 高/中/低 | 高/中/低 | [策略] |

### 潜在盲点
- [盲点1]: [说明]
- [盲点2]: [说明]

### 边界条件
- [条件1]: 超出此条件方案可能失效
- [条件2]: 需要特别关注的情况

### 实施挑战
- [挑战1]: [建议的克服方法]
- [挑战2]: [建议的克服方法]

### 审视结论
[整体评价和关键建议]
```

**用户选项**:
| 选项 | 说明 |
|------|------|
| **继续** | 接受审视结果，生成最终报告 |
| **调整方案** | 根据风险反馈修改方案 |
| **返回修正** | 回到之前的某个阶段 |

---

### Phase 5: 最终报告

**目标**: 整合所有环节成果，输出结构化报告

**执行步骤**:

1. 整合各阶段输出
2. 按照标准模板生成报告
3. 询问用户是否需要保存或导出

**报告模板**:

```markdown
# DeepThink 深度思考报告

> 生成时间: [时间戳]
> 主题: [用户原始问题]

---

## 一、核心目标

[清晰、无歧义的目标陈述]

### 成功标准
- [标准1]
- [标准2]

### 关键约束
- [约束1]
- [约束2]

---

## 二、背景信息

### 2.1 关键背景
[最重要的背景信息摘要]

### 2.2 详细信息
[分类整理的背景信息]

### 2.3 参考来源
- [来源1]
- [来源2]

---

## 三、推荐方案

### 3.1 方案概述
[方案的核心思路]

### 3.2 实施步骤
1. [步骤1]
2. [步骤2]
...

### 3.3 资源需求
- 时间: [预估]
- 人力: [需求]
- 其他: [资金/工具等]

### 3.4 预期成果
[方案实施后的预期结果]

---

## 四、风险与挑战

| 风险/挑战 | 影响程度 | 应对策略 |
|-----------|---------|---------|
| [风险1] | 高/中/低 | [策略] |
| [风险2] | 高/中/低 | [策略] |

### 潜在盲点
- [盲点描述]

### 边界条件
- [边界条件描述]

---

## 五、下一步建议

### 立即行动项
1. [行动1]
2. [行动2]

### 后续跟进项
1. [跟进1]
2. [跟进2]

### 需要进一步调研的内容
1. [调研项1]
2. [调研项2]

---

*此报告由 DeepThink 深度思考工具生成*
```

---

## 灵活流程控制

### 环节跳转
用户可以随时选择：
- **跳过下一环节**: 当前信息已足够
- **返回修正**: 回到之前的任意环节
- **输出当前结果**: 提前结束，基于已有信息输出

### 状态持久化
在整个会话中保持以下状态：
```
{
  current_phase: "init" | "clarify" | "collect" | "design" | "challenge" | "report",
  clarified_goal: { goal, success_criteria, constraints },
  collected_context: { key_points, details, sources, gaps },
  proposed_solution: { options, comparison, recommendation },
  identified_risks: { risks, blind_spots, boundary_conditions, challenges },
  phase_history: [{ phase, timestamp, user_action }]
}
```

---

## 使用示例

### 触发方式
```
/deepthink 我应该如何提升团队的技术能力？
```

### 交互示例
```
🎯 DeepThink 深度思考助手已启动

我注意到你想思考"如何提升团队的技术能力"。让我先帮你澄清一下目标...

[Phase 1: 目标澄清开始]
...
```

---

## 注意事项

1. **保持对话自然**: 各Agent应以对话式而非问卷式与用户交互
2. **适时推进**: 避免在某个环节过度停留，适时建议用户进入下一环节
3. **尊重用户选择**: 用户选择跳过或提前结束时，不要强迫继续
4. **信息追溯**: 记录信息来源，便于后续验证
5. **报告可导出**: 最终报告应可复制保存

---

*DeepThink v1.0 - 让思考更有深度*
